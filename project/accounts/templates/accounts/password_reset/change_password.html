{% extends 'main/base.html' %}
{% load static %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/global_forms.css' %}">
{% endblock %}

{% block content %}
<section class='py-12 md:py-20 flex flex-col justify-center items-center flex-1 bg-slate-900'>

    <!-- Title -->
    <div class="w-fit mx-auto text-center mb-5 sm:mb-10 flex flex-col">
        <p class="text-orange-500 text-base md:text-lg uppercase font-light">
            Gestion du compte
        </p>
        <!-- Titre Principal avec personnalité -->
        <h1 class="text-[80px] md:text-[100px] uppercase my-0 font-extrabold mb-4 leading-tight font-story drop-shadow-md -mt-20 flex">
            <span class="bg-gradient-to-b from-cyan-400 from-30% px-3
            to-blue-500 bg-clip-text text-transparent" id="changer">
                Changer
            </span>
            <span class="bg-gradient-to-r from-orange-600 via-orange-500  px-3
            to-yellow-500 bg-clip-text text-transparent">
                Mot de Passe
            </span>
        </h1>
    </div>

    <!-- Information card -->
    <div class="w-full max-w-[500px] mx-auto px-5 mb-8">
        <div class="bg-green-500/10 backdrop-blur-sm border border-green-500/30 rounded-2xl p-6 flex items-start gap-4">
            <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-info-circle text-white text-lg"></i>
            </div>
            <div>
                <h3 class="text-green-300 font-bold mb-2">Mot de passe sécurisé requis</h3>
                <p class="text-green-200 text-sm leading-relaxed">
                    Au moins 8 caractères avec une majuscule, une minuscule, un chiffre et un caractère spécial.
                </p>
            </div>
        </div>
    </div>

    <!-- Form -->
    <form method="POST" action="{% url 'accounts:change_password' %}" class='w-full max-w-[500px] mx-auto px-5 flex flex-col gap-5'>
        {% csrf_token %}
        {{ form.as_p }}
        
        <!-- Messages d'erreur -->
        {% if messages %}
            <div class="bg-red-500/10 backdrop-blur-sm border border-red-500/30 rounded-2xl p-4">
                {% for message in messages %}
                    <p class="text-red-300 text-sm">{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
        
        <button type='submit' class='group relative bg-gradient-to-r from-orange-500 to-red-500 text-white 
        px-8 py-4 rounded-2xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl shadow-orange-800/50 hover:shadow-orange-800/90 overflow-hidden'>
            <div class="absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="relative flex items-center justify-center">
                <i class="fas fa-key mr-3 text-xl"></i>
                <span>Changer le mot de passe</span>
                <i class="fas fa-arrow-right ml-3 group-hover:translate-x-1 transition-transform duration-300"></i>
            </div>
        </button>
    </form>
    
    {% if form.errors %}
        <div class="w-full max-w-[500px] mx-auto px-5 mt-4">
            <div class="bg-red-500/10 backdrop-blur-sm border border-red-500/30 rounded-2xl p-4">
                <h3 class="text-red-300 font-bold mb-3">Erreurs détectées :</h3>
                <ul class="space-y-2">
                    {% for field in form %}
                        {% if field.errors %}
                            <li class="text-red-200 text-sm">{{ field.label }}: {{ field.errors }}</li>
                        {% endif %}
                    {% endfor %}
                    {% if form.non_field_errors %}
                        <li class="text-red-200 text-sm">{{ form.non_field_errors }}</li>
                    {% endif %}
                </ul>
            </div>
        </div>
    {% endif %}
</section>
{% endblock %}